<div class="activity-form-overlay" (click)="onOverlayClick($event)">
  <div class="activity-form-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>
        @if (authStateManager.isAdmin()) {
          {{ editedActivity.title ? 'Editar Atividade' : 'Nova Atividade' }}
        } @else {
          Evento
        }
      </h2>
      <button type="button" class="close-button" (click)="onCancel()" title="Fechar">âœ•</button>
    </div>

    <form (ngSubmit)="onSave()">
      <div class="form-group">
        <label for="date">ğŸ“… Data</label>
        <input
          id="date"
          type="date"
          [(ngModel)]="editedActivity.date"
          name="date"
          required
          readonly
          [disabled]="!authStateManager.isAdmin()"
        >
      </div>

      <div class="form-group">
        <label for="title">âœ¨ TÃ­tulo</label>
        <input
          id="title"
          type="text"
          [(ngModel)]="editedActivity.title"
          name="title"
          required
          placeholder="Ex: Baile em Nova EsperanÃ§a"
          [disabled]="!authStateManager.isAdmin()"
        >
      </div>

      <div class="form-group">
        <label for="description">ğŸ“„ DescriÃ§Ã£o</label>
        <textarea
          id="description"
          [(ngModel)]="editedActivity.description"
          name="description"
          rows="4"
          placeholder="Adicione detalhes sobre a atividade..."
          [disabled]="!authStateManager.isAdmin()"
        ></textarea>
      </div>

      @if (authStateManager.isAdmin()) {
        <div class="form-actions">
          <div class="primary-actions">
            <button type="submit" class="save-button">ğŸ’¾ Salvar</button>
            <button type="button" class="cancel-button" (click)="onCancel()">Cancelar</button>
          </div>
          @if (activity.title) {
            <button type="button" class="delete-button" (click)="onDelete()">ğŸ—‘ï¸ Excluir</button>
          }
        </div>
      } @else {
        <div class="form-actions">
          <button type="button" class="cancel-button" (click)="onCancel()">Fechar</button>
        </div>
      }
    </form>
  </div>
</div>
